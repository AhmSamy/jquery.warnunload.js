/*
* Class: warnUnload
* Use: Warn user if data is unsaved when they try to browse away from current page
* Author: Carl Furrow (http://carlfurrow.com)
* Version: 0.0.2
*//*global opera:true */(function(e){function t(e){if(e.ignore===null||e.ignore==="")e.ignore=".ignore-warn";/\.ignore-warn/.test(e.ignore)||(e.ignore+=", .ignore-warn")}if(typeof e=="undefined"||e===null)return;e.warnUnload=function(n){function o(){i.change(u)}function u(){e(this).attr("data-changed","true")}function a(){var t=!1;e.each(n.urls,function(r,s){location.href.indexOf(s)>0&&i.each(function(r,i){var s=e(i);s.attr("data-changed")==="true"&&n.onItem(s)&&(t=!0)})});if(t){n.after();return f()}}function f(){return n.message}function l(){e(window).unbind("beforeunload",a)}function c(){e(n.ignore).bind("click",l)}var r={message:"Are you sure you want to leave this page?",urls:[],ignore:".ignore-warn",after:function(){},onItem:function(e){return!0}};n=e.extend(r,n);t(n);var i=e("input:text,input:checkbox,input:radio,select");try{opera.setOverrideHistoryNavigationMode("compatible");history.navigationMode="compatible"}catch(s){}o();c();e(window).bind("beforeunload",a)}})(jQuery);