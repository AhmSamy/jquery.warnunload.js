/*
* Class: warnUnload
* Use: Warn user if data is unsaved when they try to browse away from current page
* Author: Carl Furrow (http://carlfurrow.com)
* Version: 0.1.0
*//*global opera:true */(function(e){function t(e){if(e.ignore===null||e.ignore==="")e.ignore=".ignore-warn";/\.ignore-warn/.test(e.ignore)||(e.ignore+=", .ignore-warn")}if(typeof e=="undefined"||e===null)return;e.warnUnload=function(n){function o(){i.change(u)}function u(){e(this).attr("data-changed","true")}function a(){var t=!1;i.each(function(r,i){var s=e(i);if(s.attr("data-changed")==="true"&&n.onItem(s)){t=!0;return}});return t}function f(){var t=!1;n.urls&&n.urls.length>0?e.each(n.urls,function(e,n){location.href.indexOf(n)>0&&(t=a())}):t=a();if(t){n.after();return l()}return}function l(){return n.message}function c(){e(window).unbind("beforeunload",f)}function h(){e(n.ignore).bind("click",c)}var r={message:"Are you sure you want to leave this page?",urls:[],ignore:".ignore-warn",after:function(){},onItem:function(e){return!0}};n=e.extend(r,n);t(n);var i=e("input:text,input:checkbox,input:radio,select");try{opera.setOverrideHistoryNavigationMode("compatible");history.navigationMode="compatible"}catch(s){}o();h();e(window).bind("beforeunload",f)}})(jQuery);